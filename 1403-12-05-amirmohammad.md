# **گزارش اجرای مدل Autoencoder برای تشخیص ناهنجاری در داده‌های کمپرسور**  

---

## **1. مقدمه**  
در صنایع مکانیکی و فرآیندهای صنعتی، **کمپرسورها** نقش حیاتی در تولید، انتقال و تنظیم فشار هوا یا گازها دارند. نظارت بر عملکرد این دستگاه‌ها به کمک روش‌های هوش مصنوعی، می‌تواند از خرابی‌های ناگهانی و هزینه‌های تعمیرات پیشگیری کند. این پروژه با هدف **تشخیص ناهنجاری‌های عملیاتی کمپرسور**، یک مدل **Autoencoder** را برای یادگیری الگوهای نرمال از داده‌های حسگرهای مختلف طراحی و پیاده‌سازی کرده است.  

این مدل ابتدا داده‌های مربوط به کمپرسور را از **پایگاه داده MySQL** دریافت کرده، آن‌ها را پردازش کرده و از طریق **شبکه عصبی Autoencoder**، داده‌ها را فشرده و بازسازی می‌کند. اختلاف بین داده‌های بازسازی‌شده و داده‌های اصلی، معیاری برای تشخیص ناهنجاری است. همچنین، یک **API مبتنی بر Flask** برای دریافت داده‌های جدید و بررسی آن‌ها طراحی شده است.  

---

## **2. مراحل انجام کار**  

### **2.1 بارگیری داده‌ها از پایگاه داده MySQL**  
در ابتدا، ارتباطی با **پایگاه داده MySQL** برقرار شده و داده‌ها از **جدول CompressorData** استخراج گردید. پس از دریافت داده‌ها، آن‌ها در یک ساختار جدولی مناسب ذخیره شده و برای انجام تحلیل‌های بعدی آماده‌سازی شدند.  

**چالش‌های این بخش:**  
- **برقراری ارتباط پایدار با پایگاه داده** و دریافت داده‌ها بدون خطا.  
- **بررسی کامل‌بودن داده‌ها** و حذف مقادیر Null یا نامعتبر.  
- **هماهنگی نام ستون‌های جدول** با ویژگی‌های مورد نیاز مدل.  

---

### **2.2 پیش‌پردازش داده‌ها**  
پس از دریافت داده‌ها، تعدادی از ویژگی‌های کلیدی مرتبط با عملکرد کمپرسور **انتخاب و پردازش شدند**. این ویژگی‌ها عبارت‌اند از:  

- فشار ورودی و خروجی  
- دمای ورودی و خروجی  
- نرخ جریان  
- بازدهی  
- مصرف توان  
- ارتعاشات، فرکانس، دامنه و زاویه فاز  
- جرم، سختی، میرایی و چگالی  
- سرعت و ویسکوزیته  

داده‌های استخراج‌شده **به فرمت عددی مناسب تبدیل شده** و سپس برای بهبود عملکرد مدل، با استفاده از **روش MinMaxScaler نرمال‌سازی شدند** تا تمامی مقادیر در بازه **[0,1]** قرار بگیرند. این مرحله برای جلوگیری از تأثیر نامتوازن داده‌های دارای مقیاس‌های مختلف بر مدل انجام شد.  

---

### **2.3 طراحی مدل Autoencoder**  
مدل **Autoencoder** شامل دو بخش اصلی است:  

1. **بخش Encoder:** که داده‌های ورودی را فشرده کرده و به یک بردار با ابعاد کمتر تبدیل می‌کند.  
2. **بخش Decoder:** که داده‌های فشرده‌شده را بازسازی کرده و تلاش می‌کند ورودی اصلی را مجدداً ایجاد کند.  

مدل شامل چندین لایه عصبی است که به‌صورت تدریجی داده‌ها را از **۱۷ ویژگی ورودی** به یک فضای ویژگی کم‌بعد کاهش داده و سپس دوباره بازسازی می‌کند. در تمام لایه‌های مدل، از **تابع فعال‌سازی ReLU** استفاده شده است.  

**ویژگی‌های مدل:**  
- دارای **سه لایه در Encoder** با کاهش تدریجی ابعاد داده  
- دارای **سه لایه در Decoder** برای بازسازی داده‌های اصلی  
- استفاده از **تابع هزینه MSELoss** برای اندازه‌گیری میزان دقت بازسازی داده‌ها  
- بهینه‌سازی مدل با روش **Adam Optimizer**  

---

### **2.4 آموزش مدل**  
پس از تعریف مدل، فرآیند آموزش آن آغاز شد. مدل با استفاده از **۵۰ دوره آموزشی (Epochs)** و به‌کارگیری داده‌های نرمال‌شده، آموزش داده شد. در هر دوره، داده‌ها در گروه‌های کوچک‌تر پردازش شده و مدل تلاش کرد داده‌های ورودی را بازسازی کند. **میانگین خطای بازسازی در هر دوره ثبت شد** تا روند یادگیری بررسی شود.  

**پارامترهای آموزش:**  
- استفاده از **Mean Squared Error (MSE)** به‌عنوان معیار خطای بازسازی  
- تنظیم **نرخ یادگیری ۰.۰۰۱** برای مدل  
- آموزش با **سایز دسته ۳۲ نمونه‌ای (Batch Size = 32)**  

**مشکلات احتمالی در آموزش:**  
- کم بودن تعداد داده‌های آموزشی  
- تنظیم نامناسب نرخ یادگیری و تعداد دوره‌های آموزشی  
- وجود نویز یا داده‌های نامعتبر در ورودی  

---

### **2.5 پیاده‌سازی API با Flask**  
به‌منظور بررسی **وضعیت عملکرد کمپرسور** در آینده، یک **رابط برنامه‌نویسی کاربردی (API)** پیاده‌سازی شد. این API امکان ارسال داده‌های جدید را فراهم کرده و **با اجرای مدل، میزان خطای بازسازی را محاسبه می‌کند**. در صورتی که مقدار خطا **از یک آستانه مشخص (۰.۰۲)** بیشتر باشد، داده‌ی ورودی به‌عنوان **یک ناهنجاری** در نظر گرفته خواهد شد.  

**مراحل عملکرد API:**  
1. دریافت داده‌های جدید از طریق **درخواست POST**  
2. بررسی **کامل بودن و معتبر بودن داده‌ها**  
3. نرمال‌سازی داده‌ها برای هماهنگی با مدل  
4. اجرای مدل Autoencoder و **محاسبه میزان خطای بازسازی**  
5. تصمیم‌گیری درباره **عادی یا ناهنجار بودن داده**  

**چالش‌های پیاده‌سازی API:**  
- اطمینان از دریافت **داده‌های معتبر و بدون خطا**  
- مدیریت مواردی که داده‌های ورودی دارای **مقادیر Null یا NaN** باشند  
- تنظیم مناسب مقدار **آستانه ناهنجاری** برای کاهش خطاهای تشخیصی  

---

## **3. مشکلات و نواقص اجرای پروژه**  
در فرآیند اجرای پروژه، چندین چالش و مشکل مشاهده شد که باعث شد **نتیجه نهایی به‌طور کامل حاصل نشود**. برخی از این مشکلات عبارت‌اند از:  

### **۳.۱ مشکلات مرتبط با داده‌ها**  
- **عدم دسترسی به داده‌های کافی:** تعداد نمونه‌های آموزشی کم بوده و ممکن است مدل دقت کافی نداشته باشد.  
- **وجود مقادیر Null یا NaN:** برخی از داده‌های دریافت‌شده از پایگاه داده دارای **مقادیر نامعتبر** بودند که باعث ایجاد مشکل در پردازش شدند.  

### **۳.۲ مشکلات مرتبط با آموزش مدل**  
- **عدم تنظیم مناسب پارامترهای یادگیری:** مقدار نرخ یادگیری و تعداد لایه‌ها نیاز به بهینه‌سازی بیشتری دارند.  
- **تفاوت زیاد بین مقادیر ویژگی‌های مختلف:** برخی از ویژگی‌ها دارای مقادیر خیلی بزرگ یا خیلی کوچک بودند که بر یادگیری مدل تأثیر گذاشت.  

### **۳.۳ مشکلات مرتبط با تشخیص ناهنجاری**  
- **تنظیم نامناسب مقدار آستانه ناهنجاری (۰.۰۲):** این مقدار به‌صورت دستی تنظیم شده و ممکن است مقدار بهینه‌ای نباشد.  
- **نبود داده‌های تست واقعی:** مدل روی مجموعه داده‌های واقعی تست نشد و امکان دارد در عمل کارایی مناسبی نداشته باشد.  

---

## **4. پیشنهادات برای بهبود پروژه**  

1. **بهبود کیفیت داده‌ها:** جمع‌آوری داده‌های بیشتر و حذف مقادیر نامعتبر برای بهبود عملکرد مدل.  
2. **بهینه‌سازی مدل Autoencoder:** تنظیم دقیق‌تر تعداد لایه‌ها، نرخ یادگیری و تعداد نرون‌ها برای افزایش دقت.  
3. **تنظیم پویا برای آستانه ناهنجاری:** استفاده از روش‌هایی مانند **Gaussian Distribution** برای تعیین مقدار آستانه به‌صورت دینامیک.  
4. **اجرای آزمایش‌های بیشتر:** تست مدل با **داده‌های واقعی و مقایسه آن با روش‌های دیگر تشخیص ناهنجاری**.  
5. **افزودن مکانیزم خودکار برای تشخیص داده‌های نامعتبر:** بررسی خودکار وجود **مقادیر Null یا مقادیر خارج از محدوده** و حذف آن‌ها قبل از پردازش.  

---

## **5. نتیجه‌گیری**  
در این پروژه، یک **مدل یادگیری عمیق مبتنی بر Autoencoder** برای تشخیص ناهنجاری‌های کمپرسور طراحی و پیاده‌سازی شد. با وجود اینکه مراحل توسعه تا حد زیادی پیش رفت، **نتیجه نهایی به‌دلیل مشکلات داده‌ای و تنظیمات مدل به‌طور کامل حاصل نشد**. بهبود کیفیت داده‌ها و بهینه‌سازی مدل می‌تواند در آینده باعث افزایش دقت تشخیص ناهنجاری شود.