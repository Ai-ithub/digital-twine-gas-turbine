### **گزارش کار**
**نام: فرید کاکی**  
**تاریخ: ۱۴۰۳/۱۲/۱۱**

---

#### **قسمت اول: کد پایه‌داده (Database) و جمع‌آوری داده‌ها**

**1. توضیحات کلی:**  
کد اول شامل سه تابع اصلی است که به‌ترتیب مراحل زیر را انجام می‌دهند:
- **ایجاد پایگاه داده (Database):**  
  تابع `create_database` یک پایگاه داده با نام `compressor` ایجاد می‌کند. این پایگاه داده برای ذخیره‌سازی اطلاعات مربوط به عملکرد کمپرسور طراحی شده است.
  
- **ایجاد جدول:**  
  تابع `create_table` یک جدول با نام `CompressorData` در پایگاه داده ایجاد می‌کند. این جدول شامل فیلدهای مختلفی است که پارامترهای کمپرسور مانند فشار، دما، جریان، ارتعاش و سایر مشخصات را ذخیره می‌کند.

- **درج داده‌ها:**  
  تابع `insert_data` داده‌های شبیه‌سازی‌شده را به‌صورت مداوم و هر یک ثانیه یک‌بار به جدول `CompressorData` اضافه می‌کند. این داده‌ها شامل مقادیر تصادفی برای پارامترهای مختلف کمپرسور است که با استفاده از تابع `random.uniform` تولید شده‌اند.

**2. جزئیات پیاده‌سازی:**  
- **اتصال به MySQL:**  
  از کتابخانه `mysql.connector` برای اتصال به پایگاه داده MySQL استفاده شده است. اطلاعات اتصال شامل `host`, `user`, و `password` تنظیم شده‌اند.

- **ساختار جدول:**  
  جدول `CompressorData` شامل فیلدهای زیر است:
  - `id`: شناسه منحصر به فرد برای هر رکورد.
  - `TimeData`: زمان ثبت داده.
  - پارامترهای کمپرسور مانند `Pressure_In`, `Temperature_In`, `Flow_Rate`, و سایر مشخصات.

- **شبیه‌سازی داده‌ها:**  
  داده‌های شبیه‌سازی‌شده به‌صورت تصادفی در بازه‌های مشخصی تولید می‌شوند. این داده‌ها هر ثانیه یک‌بار به جدول اضافه می‌شوند.

**3. نتیجه‌گیری:**  
این بخش از کد به‌صورت خودکار داده‌های شبیه‌سازی‌شده را تولید و در پایگاه داده ذخیره می‌کند. این داده‌ها می‌توانند به‌عنوان ورودی برای مدل‌سازی و پیش‌بینی عملکرد کمپرسور استفاده شوند.

---

#### **قسمت دوم: مدل‌سازی و پیش‌بینی با استفاده از Darts**

**1. توضیحات کلی:**  
کد دوم شامل مراحل زیر است:
- بارگذاری داده‌ها از یک فایل CSV.
- پیش‌پردازش داده‌ها.
- آموزش مدل `NBEATS` برای پیش‌بینی ارتعاش کمپرسور.
- ارزیابی مدل و تحلیل باقی‌مانده‌ها.
- صادر کردن مدل به فرمت ONNX.

**2. جزئیات پیاده‌سازی:**  
- **بارگذاری داده‌ها:**  
  داده‌ها از فایل `extended_compressor_data_with_timestamp.csv` خوانده می‌شوند. این فایل شامل ستون‌های `Timestamp` و `Vibration` است.

- **پیش‌پردازش داده‌ها:**  
  - تاریخ‌ها به فرمت `datetime` تبدیل می‌شوند.
  - مقادیر گم‌شده در ستون `Vibration` با استفاده از روش درون‌یابی خطی پر می‌شوند.
  - داده‌ها به شیء `TimeSeries` تبدیل می‌شوند.

- **تقسیم داده‌ها:**  
  داده‌ها به دو بخش آموزش (`train`) و اعتبارسنجی (`val`) تقسیم می‌شوند.

- **مقیاس‌بندی داده‌ها:**  
  داده‌ها با استفاده از کلاس `Scaler` مقیاس‌بندی می‌شوند تا مدل بهتر آموزش ببیند.

- **آموزش مدل:**  
  مدل `NBEATS` با پارامترهای زیر آموزش داده می‌شود:
  - طول ورودی: ۴۸
  - طول خروجی: ۱۲
  - تعداد دوره‌های آموزش: ۱۰۰
  - اندازه دسته: ۳۲
  - نرخ یادگیری: ۰٫۰۰۰۱

- **ارزیابی مدل:**  
  عملکرد مدل با استفاده از معیار `MAPE` (خطای درصدی مطلق میانگین) ارزیابی می‌شود.

- **تحلیل باقی‌مانده‌ها:**  
  باقی‌مانده‌ها (تفاوت بین مقادیر واقعی و پیش‌بینی‌شده) تحلیل و نمایش داده می‌شوند.

- **صادر کردن مدل:**  
  مدل آموزش‌دیده به فرمت ONNX صادر می‌شود تا بتوان از آن در محیط‌های مختلف استفاده کرد.

**3. نتیجه‌گیری:**  
مدل `NBEATS` با موفقیت آموزش داده شد و توانست پیش‌بینی‌های دقیقی از ارتعاش کمپرسور ارائه دهد. معیار `MAPE` نشان داد که مدل دقت قابل قبولی دارد. همچنین، صادر کردن مدل به فرمت ONNX امکان استفاده از آن در سیستم‌های مختلف را فراهم می‌کند.

---

#### **نتیجه‌گیری کلی:**
این پروژه شامل دو بخش اصلی است:  
1. **جمع‌آوری داده‌ها:**  
   داده‌های شبیه‌سازی‌شده به‌صورت خودکار تولید و در پایگاه داده ذخیره می‌شوند. این داده‌ها می‌توانند به‌عنوان ورودی برای مدل‌سازی استفاده شوند.

2. **مدلسازی و پیش‌بینی:**  
   مدل `NBEATS` برای پیش‌بینی ارتعاش کمپرسور آموزش داده شد و دقت قابل قبولی داشت. این مدل می‌تواند در نظارت بر عملکرد کمپرسور و پیش‌بینی خرابی‌های احتمالی استفاده شود.

**فرید کاکی**  
**تاریخ: ۱۴۰۳/۱۲/۱۱**