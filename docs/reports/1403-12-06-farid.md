### **گزارش کار روزانه - توسعه API برای پیش‌بینی ارتعاشات و دریافت داده‌های کمپرسور**  
📅 **تاریخ:** ۶ اسفند ۱۴۰۲  

---

## **۱. مقدمه**  
در این گزارش، فعالیت‌های انجام‌شده در زمینه‌ی توسعه API برای دریافت داده‌های کمپرسور و پیش‌بینی ارتعاشات با استفاده از مدل ONNX مستند شده است. این API به دو بخش اصلی تقسیم می‌شود:  
1. دریافت کلیه‌ی داده‌های کمپرسور از پایگاه داده  
2. انجام پیش‌بینی ارتعاشات و ارائه‌ی خروجی بر اساس داده‌های موجود  

---

## **۲. اقدامات انجام‌شده**  

### **۲.۱. طراحی و پیاده‌سازی API برای دریافت داده‌ها**  
✅ ایجاد یک **Route جدید** در Flask با نام `/get_all_data`  
✅ اتصال API به پایگاه داده **MySQL** و خواندن کلیه‌ی داده‌های جدول `CompressorData`  
✅ **بررسی اتصال پایگاه داده** و مدیریت خطاهای احتمالی  
✅ مرتب‌سازی داده‌ها بر اساس `TimeData` برای نمایش نتایج به‌صورت **ترتیب زمانی**  

📌 **جزئیات پیاده‌سازی:**  
- کلاس `CompressorDatabase` برای اتصال به پایگاه داده و خواندن اطلاعات **بهینه‌سازی** شد.  
- کوئری `SELECT * FROM CompressorData ORDER BY TimeData ASC` برای دریافت همه‌ی ستون‌ها از پایگاه داده اجرا شد.  
- داده‌ها به‌صورت JSON برگردانده شدند تا در **داشبورد React** به‌کار گرفته شوند.  

---

### **۲.۲. طراحی و پیاده‌سازی API برای پیش‌بینی ارتعاشات**  
✅ ایجاد یک **Route جدید** در Flask با نام `/predict_all`  
✅ بارگذاری مدل **ONNX** برای انجام پیش‌بینی‌ها  
✅ استفاده از کلاس `VibrationPredictor` برای پردازش داده‌ها و ارائه‌ی پیش‌بینی  
✅ مدیریت خطاهای احتمالی در بارگذاری مدل و خواندن داده‌های ورودی  

📌 **جزئیات پیاده‌سازی:**  
- بررسی شد که مدل ONNX **به‌درستی بارگذاری شده** و می‌تواند پیش‌بینی را انجام دهد.  
- مقادیر پیش‌بینی شده **با استفاده از پارامترهای نرمال‌سازی بازگردانی** شدند.  
- نتایج پیش‌بینی شامل `TimeData` و مقدار ارتعاش خروجی برای تحلیل بیشتر **فرمت‌بندی** شد.  

---

## **۳. تست و اعتبارسنجی**  
✅ **تست اتصال پایگاه داده** و اطمینان از دریافت تمامی داده‌ها بدون خطا  
✅ **تست مدل ONNX** برای انجام پیش‌بینی با داده‌های واقعی  
✅ **تست API در Postman** برای بررسی صحت پاسخ‌های JSON  
✅ **بررسی خطاهای احتمالی و رفع آنها** در صورت عدم وجود داده‌های کافی  

📌 **نتایج تست:**  
- **`/get_all_data`** → همه‌ی داده‌ها از پایگاه داده **بدون مشکل** دریافت شدند ✅  
- **`/predict_all`** → مدل پیش‌بینی را انجام داد و داده‌های خروجی **صحیح بودند** ✅  

---

## **۴. گام‌های بعدی**  
📌 **بهینه‌سازی API برای پردازش هم‌زمان (Asynchronous Processing)**  
📌 **افزودن قابلیت دریافت داده‌های فیلتر شده بر اساس بازه‌ی زمانی خاص**  
📌 **اتصال API به داشبورد React و نمایش مقادیر در نمودارها**  
📌 **بهبود مدل پیش‌بینی با استفاده از داده‌های جدید و بهینه‌سازی پارامترهای آن**  

---

### **نتیجه‌گیری**  
📌 API توسعه‌یافته می‌تواند تمامی داده‌های کمپرسور را از پایگاه داده دریافت کند و همچنین پیش‌بینی ارتعاشات را با استفاده از مدل ONNX انجام دهد.  
📌 این API به‌طور کامل **تست شد** و داده‌های خروجی برای استفاده در داشبورد آماده هستند.  
📌 مراحل بعدی شامل **بهینه‌سازی و یکپارچه‌سازی API با داشبورد** خواهد بود.  

🚀 **این API گامی مهم در توسعه سیستم مانیتورینگ کمپرسور SGT-400 محسوب می‌شود!**